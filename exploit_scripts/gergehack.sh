#! /bin/sh

time_wasting()
{
  timelim=120
  numcount=0
  while [[ $numcount -lt $timelim ]]; do
    sleep 60
    let numcount+=1
    echo "halting $numcount min of $timelim"
  done
}

# check duplicate process
if [[ -f /tmp/exploit.txt ]]; then
  echo $0 'is already running'
  # exit if there is already an instance of this script running
  if [[ -f /tmp/exploit1.txt ]]; then
    echo 'kthread hold already active'
  else
    echo "exploit">/tmp/exploit1.txt
    time_wasting
  fi
else
  echo "exploit">/tmp/exploit.txt
  busybox telnetd &
  echo -e "  _________________________________\n |                                 |\n |       Gerge Hacked This         |\n |_________________________________|"
  /etc/jffs2/gergedaemon.sh &
  echo '*************  start network service   *************'
  /usr/sbin/wifi_manage.sh start
  echo '*************     serve snapshots      *************'
  /mnt/anyka_hack/snapshot_daemon.sh &
  #killall -12 daemon
  #killall daemon
  #killall cmd_serverd
  #killall syslogd
  #killall klogd
  time_wasting
fi
